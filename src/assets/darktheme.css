/* ========== 深色主题（现代全适配版） ========== */
.dark-theme {
    /* 基础色板 */
    --primary-color: #00968F;
    --primary-hover: #1cc9c0;
    --surface-color: #314a4a;
    --background-color: #243636;
    --divider-color: #477979;
    --text-primary: #aee7e1;
    --text-dark: #192322; /* 深灰文字 */
    --shadow-1: 0 2px 6px rgba(0, 0, 0, 0.4);
    --shadow-2: 0 4px 12px rgba(0, 0, 0, 0.45);
    --shadow-3: 0 8px 16px rgba(0, 0, 0, 0.5);
    --accent-2: #547a77;
}

/* 全局适配 */
.dark-theme body {
    background: var(--background-color);
    color: var(--text-primary);
}

/* 头部 */
.dark-theme header {
    background: var(--primary-color);
    border-color: rgba(255, 255, 255, 0.08);
    color: var(--text-dark);
}

/* 文件上传区域 */
.dark-theme .file-upload {
    --border-color: var(--divider-color);
    --highlight-color: var(--primary-hover);
    --info-bg: rgba(38, 137, 127, 0.398);
    background: var(--surface-color);
    border: 1.5px dashed var(--border-color);
}

.dark-theme .file-upload:hover {
    background: rgba(77, 182, 172, 0.05);
}

.dark-theme .highlight {
    color: var(--primary-hover);
}

/* 输入系统 */
.dark-theme #sjurl {
    background: rgba(25, 34, 34, 0.9);
    border-color: var(--divider-color);
    color: var(--text-primary);
}

.dark-theme #sjurl:focus {
    outline: 1px solid var(--primary-hover);
}

/* 开关组件 */
.dark-theme .chunk-toggle {
    --active-color: var(--primary-hover);
    --border-color: var(--divider-color);
    --hover-bg: rgba(77, 182, 172, 0.1);
    color: var(--text-primary);
}

.dark-theme .custom-checkbox {
    border-color: var(--divider-color);
}

/* 按钮系统 */
.dark-theme button {
    background: var(--primary-color);
    color: var(--text-dark);
}

.dark-theme button:hover {
    background: var(--primary-hover);
    box-shadow: var(--shadow-2);
    /* 同步浅色主题的阴影层级 */
}

/* 表格系统 */
.dark-theme #uploadHistory .table-container {
    overflow: auto;
}

.dark-theme .upload-history-table {
    border-color: var(--accent-2);
    box-shadow: var(--shadow-1);
    /* 同步深色阴影 */
}

.dark-theme .upload-history-table th {
    background: var(--background-color);
    color: var(--text-primary);
}

.dark-theme .upload-history-table td {
    background: rgba(25, 34, 34, 0.9);
    color: var(--text-primary);
}

.dark-theme .upload-history-table tr:hover td {
    background: rgba(77, 182, 172, 0.05) !important;
    /* 覆盖原主题的浅色悬停 */
}

.dark-theme .link-cell {
    color: var(--primary-color) !important;
}

/* 调试面板 */
.dark-theme .debug-output {
    background: rgba(25, 34, 34, 0.9);
}

.dark-theme .debug-output pre {
    color: var(--text-primary);
}

/* 页脚 */
.dark-theme footer {
    background: var(--surface-color);
}

.dark-theme footer a {
    color: var(--primary-color);
}

.dark-theme footer p {
    color: var(--text-primary);
}

/* 辅助元素 */
.dark-theme .chunk-info {
    background: var(--background-color);
    color: var(--text-primary);
}

.dark-theme header,
.dark-theme main,
.dark-theme .file-upload,
.dark-theme footer {
    box-shadow: var(--shadow-1);
}

/* 替换原 * 选择器 */
.dark-theme {
    transition: background-color 0.3s var(--ease-standard),
        color 0.3s var(--ease-standard);
}

.dark-theme header,
.dark-theme main,
.dark-theme .file-upload,
.dark-theme footer,
.dark-theme button {
    transition:
        background-color 0.3s var(--ease-standard),
        color 0.3s var(--ease-standard),
        border-color 0.3s var(--ease-standard),
        box-shadow 0.3s var(--ease-standard);
}

.dark-theme .m3-toast {
    background: var(--primary-color) !important;
    border-color: var(--accent-2);
    box-shadow: var(--shadow-3) !important;
    color: var(--text-dark);
}